% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/freq-table-hierarchical.R
\name{two_layer_frequency_table}
\alias{two_layer_frequency_table}
\title{Two-layer frequency table (hierarchical)}
\usage{
two_layer_frequency_table(
  dataset = de,
  variable1,
  variable2,
  sort = TRUE,
  threshold = 1
)
}
\arguments{
\item{dataset}{A data.frame. The input dataset. Defaults to `de` in the
surrounding environment if not supplied.}

\item{variable1}{Column name (unquoted) for the primary grouping variable
(tidy-eval).}

\item{variable2}{Column name (unquoted) for the secondary grouping variable
(tidy-eval).}

\item{sort}{Logical. If TRUE, sort groups by descending counts. Default:
TRUE.}

\item{threshold}{Integer. Minimum count threshold for including a secondary
category. Secondary categories with counts below `threshold` will be
combined into an "Other" row. Default: 1.}
}
\value{
A kable/kableExtra HTML table (invisibly returned for knit/HTML
  output) showing the hierarchical frequency table with totals.
}
\description{
Construct a two-layer frequency table with counts and percentages for
`variable1` and a secondary breakdown by `variable2`. The function returns
a formatted kable (HTML) object suitable for reporting.

The function performs the following:
- Removes rows with NA in either `variable1` or `variable2`.
- Produces a primary frequency table for `variable1` (counts and percent).
- Produces a secondary count table by `variable1` and `variable2`.
- Optionally groups small secondary categories (below `threshold`) into
  an "Other" category.
- Optionally sorts the result.

The `variable1` and `variable2` arguments use tidy-eval (unquoted column
names).
}
\examples{
# Using mtcars as an example (treating numeric values as factors for grouping)
library(dplyr)
mtcars2 <- mtcars \%>\% mutate(cyl = as.factor(cyl), gear = as.factor(gear))
two_layer_frequency_table(mtcars2, cyl, gear, sort = TRUE, threshold = 1)
deaths_aug24 \%>\%
two_layer_frequency_table(perp_affiliation, dec_affiliation, sort=TRUE, threshold=3)

}
